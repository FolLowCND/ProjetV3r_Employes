@page "/gestion-employes"
@using ProjetV3R_Employe.Data.Models
@using ProjetV3R_Employe.Shared.ComposantsGestionEmploye
@inject EmployeService EmployeService

<h3>Gestion des Employés</h3>

<button class="btn btn-success" @onclick="AfficherFormulaireAjout">Ajouter un Employé</button>

@if (formulaireVisible)
{
    <CompAjoutEmploye OnEmployeAjoute="RechargerEmployes" />
}

<CompListeEmploye @ref="listeEmployes" OnModifierEmploye="EditerEmploye" />


@code {
    private bool formulaireVisible;
    private User employeSelectionne = new User();
    private CompListeEmploye? listeEmployes;



    private void AfficherFormulaireAjout()
    {
        employeSelectionne = new User(); // Réinitialiser pour un ajout
        formulaireVisible = true;
    }

    private void EditerEmploye(User employe)
    {
        employeSelectionne = employe; // Charger l'employé existant pour édition
        formulaireVisible = true;
    }

    private async Task RechargerEmployes()
    {
        formulaireVisible = false;
        if (listeEmployes != null)
        {
            await listeEmployes.RechargerAsync();
        }
    }
}
